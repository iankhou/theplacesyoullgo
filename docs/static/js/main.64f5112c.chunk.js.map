{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["App","mapContainer","useRef","map","useState","users","setUsers","lng","setLng","lat","setLat","zoom","setZoom","search","setSearch","displayRoommates","setDisplayRoommates","theme","createTheme","palette","mode","primary","main","deepPurple","addPopup","el","coords","placeholder","document","createElement","ReactDOM","render","mapboxgl","Popup","setDOMContent","setLngLat","addTo","current","useEffect","on","getCenter","toFixed","getZoom","formPopup","user","className","Date","toLocaleDateString","axiosStart","performance","now","axios","get","then","resp","axiosEnd","console","log","features","uniqueStart","data","forEach","d","type","properties","weight","timestamp","name","year","major","activity","roommate","contact","email","attention","geometry","coordinates","uniqueEnd","groupStart","locCache","Set","groupedFeatures","groupI","Object","values","e","long","found","c","oldUserList","oldGeometry","oldWeight","oldAttention","some","a","push","add","groupEnd","userCollection","mapStart","Map","container","style","center","addSource","addLayer","id","source","maxzoom","paint","stops","default","minzoom","property","JSON","parse","mapEnd","options","keys","location","userData","ThemeProvider","marginBottom","IconButton","marginRight","color","onClick","Button","size","variant","href","entries","filter","entry","flyTo","justifyContent","display","aria-label","ref","classNames","overlay","modal","open","onClose","Autocomplete","isOptionEqualToValue","option","value","getOptionLabel","autoComplete","renderInput","params","TextField","renderOption","props","key","sx","onChange","val","accessToken","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.64f5112c.chunk.js","sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\n// eslint-disable-next-line\nimport mapboxgl from \"!mapbox-gl\";\nimport axios from \"axios\";\nimport Button from \"@mui/material/Button\";\nimport IconButton from \"@mui/material/IconButton\";\nimport Autocomplete from \"@mui/material/Autocomplete\";\nimport TextField from \"@mui/material/TextField\";\nimport { ThemeProvider, createTheme } from \"@mui/material/styles\";\nimport { deepPurple } from \"@mui/material/colors\";\nimport ExpandMoreIcon from \"@mui/icons-material/ExpandMore\";\nimport ExpandLessIcon from \"@mui/icons-material/ExpandLess\";\nimport SearchIcon from \"@mui/icons-material/Search\";\nimport \"react-responsive-modal/styles.css\";\nimport { Modal } from \"react-responsive-modal\";\nimport \"./App.css\";\n\nmapboxgl.accessToken = \"pk.eyJ1IjoiaWFua2hvdSIsImEiOiJja3U1enMzNHE0enN4Mm9waXNwcDlyeGVpIn0.gz1TKA2H5JfDkMiHkdVxRQ\";\n\nexport default function App() {\n\t// update users from Google Sheet\n\tconst mapContainer = useRef(null);\n\tconst map = useRef(null);\n\tconst [users, setUsers] = useState(null);\n\tconst [lng, setLng] = useState(-98.0822);\n\tconst [lat, setLat] = useState(39.6719);\n\tconst [zoom, setZoom] = useState(3);\n\tconst [search, setSearch] = useState(false);\n\tconst [displayRoommates, setDisplayRoommates] = useState(false);\n\n\tconst theme = createTheme({\n\t\tpalette: {\n\t\t\tmode: \"dark\",\n\t\t\tprimary: {\n\t\t\t  main: deepPurple[400],\n\t\t\t},\n\t\t  },\n\t  });\n\n\tuseEffect(() => {\n\t\tif (!map.current) return; // wait for map to initialize\n\t\tmap.current.on(\"move\", () => {\n\t\t\tsetLng(map.current.getCenter().lng.toFixed(4));\n\t\t\tsetLat(map.current.getCenter().lat.toFixed(4));\n\t\t\tsetZoom(map.current.getZoom().toFixed(2));\n\t\t});\n\t});\n\n\tfunction addPopup(el, coords) {\n\t\tconst placeholder = document.createElement(\"div\");\n\t\tReactDOM.render(el, placeholder);\n  \n\t\tnew mapboxgl.Popup()\n\t\t\t.setDOMContent(placeholder)\n\t\t\t.setLngLat(coords)\n\t\t\t.addTo(map.current);\n\t}\n\n\tconst formPopup = (users) => {\n\t\treturn <div>\n\t\t\t{users.map((user) => {\n\t\t\t\treturn <div className=\"user-container\" key={`USER_INFO_BOX_FOR_${user[\"email\"]}`}>\n\t\t\t\t\t<h1>{`${user[\"name\"]} '${user[\"year\"]}`}</h1>\n\t\t\t\t\t{user[\"roommate\"] ? <h3><b>Looking for a house/roommate</b></h3> : null}\n\t\t\t\t\t<p>Major(s): {user[\"major\"]}</p>\n\t\t\t\t\t<p>What I&apos;m doing here: {user[\"activity\"]}</p>\n\t\t\t\t\t{user[\"contact\"] ? <p>Contact: {user[\"contact\"]}</p> : null}\n\t\t\t\t\t<p>Last updated: {new Date(user[\"timestamp\"]).toLocaleDateString()}</p>\n\t\t\t\t</div>;\n\t\t\t}\n\t\t\t) }\n\t\t</div>;\n\t};\n\n\tuseEffect(() => {\n\t\tif (users) return;\n\t\tconst axiosStart = performance.now();\n\t\taxios.get(\"https://script.google.com/macros/s/AKfycbzqn-y8SAgoDB4QMh-XFzVwP1jrc2FDnh7GXFUy2Mkz6iKv9m5b0uhAKdT7Y9jrIQ7wcQ/exec\")\t\n\t\t\t.then((resp) => {\n\t\t\t\tconst axiosEnd = performance.now();\n\t\t\t\tconsole.log(`Axios call took ${axiosEnd - axiosStart} milliseconds`);\n        \n\t\t\t\tconst features = {};\n\t\t\t\tconst uniqueStart = performance.now();\n\t\t\t\tresp.data.forEach((d) => {          \n\t\t\t\t\tfeatures[d[\"Email Address\"]] =  {\n\t\t\t\t\t\ttype: \"Feature\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tweight: 1,\n\t\t\t\t\t\t\tusers: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttimestamp: d[\"Timestamp\"],\n\t\t\t\t\t\t\t\t\tname: d[\"Name (First Last)\"],\n\t\t\t\t\t\t\t\t\tyear: d[\"Year\"],\n\t\t\t\t\t\t\t\t\tmajor: d[\"Major(s)\"],\n\t\t\t\t\t\t\t\t\tactivity: d[\"What have/will you be(en) doing there (ex. Working at McDonalds as a Software Engineer)?\"],\n\t\t\t\t\t\t\t\t\troommate: d[\"Are you looking for a house/roommate?\"] == \"Yes\" ? true : false,\n\t\t\t\t\t\t\t\t\tcontact: d[\"Contact information\"],\n\t\t\t\t\t\t\t\t\temail: d[\"Email Address\"]\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tattention: d[\"Are you looking for a house/roommate?\"] == \"Yes\" ? 1 : 0,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgeometry: {\n\t\t\t\t\t\t\ttype: \"Point\",\n\t\t\t\t\t\t\tcoordinates: [\n\t\t\t\t\t\t\t\td[\"Longitude\"], d[\"Latitude\"]\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\tsetUsers(features);\n\n\t\t\t\tconst uniqueEnd = performance.now();\n\n\t\t\t\tconsole.log(`Eliminating duplicate records took ${uniqueEnd - uniqueStart} milliseconds`);\n        \n\t\t\t\tconst groupStart = performance.now();\n\n\t\t\t\t// set contains coordinates [long, lat]\n\t\t\t\tconst locCache = new Set();\n\n\t\t\t\tconst groupedFeatures = [];\n\t\t\t\tlet groupI = 0;\n\n\t\t\t\t// map through each user\n\t\t\t\tObject.values(features).forEach((e) => {\n\t\t\t\t\tconst long = e[\"geometry\"][\"coordinates\"][0];\n\t\t\t\t\tconst lat = e[\"geometry\"][\"coordinates\"][1];\n\t\t\t\t\tlet found = false;\n\n\t\t\t\t\t// forEach through the cache and check for similar loc\n\t\t\t\t\tlocCache.forEach(c => {\n\t\t\t\t\t\t// if sim loc, group into the first occurrence\n\t\t\t\t\t\tif ((long - c[0]) ** 2 + (lat - c[1]) ** 2 < 0.001 ** 2) {\n\t\t\t\t\t\t\t// append to prev user list, inc weight, keep geometry\n              \n\t\t\t\t\t\t\tconst oldUserList = groupedFeatures[c[2]][\"properties\"][\"users\"];\n\t\t\t\t\t\t\tconst oldGeometry = groupedFeatures[c[2]][\"geometry\"];\n\t\t\t\t\t\t\tconst oldWeight = groupedFeatures[c[2]][\"properties\"][\"weight\"];\n\t\t\t\t\t\t\tconst oldAttention = groupedFeatures[c[2]][\"properties\"][\"attention\"];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tgroupedFeatures[c[2]] = {\n\t\t\t\t\t\t\t\ttype: \"Feature\",\n\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\tweight: oldWeight + 1,\n\t\t\t\t\t\t\t\t\tusers: [...oldUserList, e[\"properties\"][\"users\"][0]],\n\t\t\t\t\t\t\t\t\tattention: + [oldAttention, e[\"properties\"][\"attention\"]].some((a) => a === 1)\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tgeometry: oldGeometry\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (!found) {\n\t\t\t\t\t\t// if you've made it this far, there is not a match\n\t\t\t\t\t\t// push the uniquely-located user to the group\n\t\t\t\t\t\tgroupedFeatures.push(e);\n\t\t\t\t\t\t// cache their location and group index, increment group index\n\t\t\t\t\t\tlocCache.add([long, lat, groupI]);\n\t\t\t\t\t\tgroupI ++;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tconst groupEnd = performance.now();\n\n\t\t\t\tconsole.log(`Grouping records took ${groupEnd - groupStart} milliseconds`);\n\n\t\t\t\tconst userCollection = {\n\t\t\t\t\ttype: \"FeatureCollection\",\n\t\t\t\t\tfeatures: groupedFeatures\n\t\t\t\t};\n\n\t\t\t\tif (map.current) return; // initialize map only once\n    \n\t\t\t\tconst mapStart = performance.now();\n\n\t\t\t\tmap.current = new mapboxgl.Map({\n\t\t\t\t\tcontainer: mapContainer.current,\n\t\t\t\t\tstyle: \"mapbox://styles/mapbox/dark-v10\",\n\t\t\t\t\tcenter: [lng, lat],\n\t\t\t\t\tzoom: zoom\n\t\t\t\t});\n    \n\t\t\t\tmap.current.on(\"load\", () => {\n\t\t\t\t\tmap.current.addSource(\"users\", {\n\t\t\t\t\t\ttype: \"geojson\",\n\t\t\t\t\t\tdata: userCollection\n\t\t\t\t\t});\n\n\t\t\t\t\tmap.current.addLayer(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: \"users-heat\",\n\t\t\t\t\t\t\ttype: \"heatmap\",\n\t\t\t\t\t\t\tsource: \"users\",\n\t\t\t\t\t\t\tmaxzoom: 14,\n\t\t\t\t\t\t\tpaint: {\n\t\t\t\t\t\t\t\t// increase weight as diameter breast height increases\n\t\t\t\t\t\t\t\t\"heatmap-weight\": {\n\t\t\t\t\t\t\t\t\ttype: \"exponential\",\n\t\t\t\t\t\t\t\t\tstops: [\n\t\t\t\t\t\t\t\t\t\t[1, 0],\n\t\t\t\t\t\t\t\t\t\t[500, 30],\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t// increase intensity as zoom level increases\n\t\t\t\t\t\t\t\t\"heatmap-intensity\": {\n\t\t\t\t\t\t\t\t\tstops: [\n\t\t\t\t\t\t\t\t\t\t[11, 1],\n\t\t\t\t\t\t\t\t\t\t[15, 3]\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t// assign color values to points depending on their density\n\t\t\t\t\t\t\t\t\"heatmap-color\": [\n\t\t\t\t\t\t\t\t\t\"interpolate\",\n\t\t\t\t\t\t\t\t\t[\"linear\"],\n\t\t\t\t\t\t\t\t\t[\"heatmap-density\"],\n\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t\t\"rgba(255,153,153,0)\",\n\t\t\t\t\t\t\t\t\t0.2,\n\t\t\t\t\t\t\t\t\t\"rgb(0,255,150)\",\n\t\t\t\t\t\t\t\t\t0.4,\n\t\t\t\t\t\t\t\t\t\"rgb(50,204,0)\",\n\t\t\t\t\t\t\t\t\t0.6,\n\t\t\t\t\t\t\t\t\t\"rgb(50,153,0)\",\n\t\t\t\t\t\t\t\t\t0.8,\n\t\t\t\t\t\t\t\t\t\"rgb(50,102,0)\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t// increase radius as zoom increases\n\t\t\t\t\t\t\t\t\"heatmap-radius\": {stops: [[11, 15],[15, 20]]},\n\t\t\t\t\t\t\t\t// decrease opacity to transition into the circle layer\n\t\t\t\t\t\t\t\t\"heatmap-opacity\": {\n\t\t\t\t\t\t\t\t\tdefault: 1,\n\t\t\t\t\t\t\t\t\tstops: [\n\t\t\t\t\t\t\t\t\t\t[11, 1],\n\t\t\t\t\t\t\t\t\t\t[12, 0]\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"waterway-label\"\n\t\t\t\t\t);\n\n\t\t\t\t\tmap.current.addLayer(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: \"users-point\",\n\t\t\t\t\t\t\ttype: \"circle\",\n\t\t\t\t\t\t\tsource: \"users\",\n\t\t\t\t\t\t\tminzoom: 5,\n\t\t\t\t\t\t\tpaint: {\n\t\t\t\t\t\t\t\t// increase the radius of the circle as the zoom level and weight increases\n\t\t\t\t\t\t\t\t\"circle-radius\": 8,\n\t\t\t\t\t\t\t\t\"circle-color\": {\n\t\t\t\t\t\t\t\t\tproperty: \"attention\",\n\t\t\t\t\t\t\t\t\ttype: \"exponential\",\n\t\t\t\t\t\t\t\t\tstops: [\n\t\t\t\t\t\t\t\t\t\t[0, \"rgb(0,225,0)\"],\n\t\t\t\t\t\t\t\t\t\t[1, \"rgb(255,200,0)\"]\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\"circle-stroke-color\": \"rgba(0,100,0, 0.3)\",\n\t\t\t\t\t\t\t\t\"circle-stroke-width\": 1,\n\t\t\t\t\t\t\t\t\"circle-opacity\": {\n\t\t\t\t\t\t\t\t\tstops: [\n\t\t\t\t\t\t\t\t\t\t[11, 0],\n\t\t\t\t\t\t\t\t\t\t[12, 1]\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"waterway-label\"\n\t\t\t\t\t);\n\n\t\t\t\t\tmap.current.on(\"click\", \"users-point\", ({ features }) => {\n\t\t\t\t\t\tconst { users } = features[0].properties;\n\t\t\t\t\t\tconst myComp = formPopup(JSON.parse(users));\n\t\t\t\t\t\taddPopup(myComp, features[0].geometry.coordinates);\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tconst mapEnd = performance.now();\n\t\t\t\t\n\t\t\t\tconsole.log(`Mapping records took ${mapEnd - mapStart} milliseconds`);\n\t\t\t\tconsole.log(\"If you would like to help develop this site, please contact me (Ian Hou) via iankwanhou@gmail.com.\");\n\n\n\n\t\t\t});\n\t});\n\n\tconst displayUsers = () => {\n\t\tif (users) {\n\t\t\t// Filter for users looking for roommates\n\t\t\tconst usersLookingForRoommate = Object.entries(users).filter((entry) => {\n\t\t\t\treturn entry[1].properties.users[0].roommate === true;\n\t\t\t});\n\t\t\treturn usersLookingForRoommate.map(([email, data]) => {\n\t\t\t\treturn (\n\t\t\t\t\t<div key={email} className=\"user-container\" onClick={()=>{map.current.flyTo({center: data.geometry.coordinates,\n\t\t\t\t\t\tzoom: 13});}}>\n\t\t\t\t\t\t<div>{data.properties.users[0].name}</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t});\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t};\n\n\tlet options;\n\n\tif (users) {\n\t\toptions = Object.keys(users).map((email) => {\n\t\t\treturn {\n\t\t\t\temail,\n\t\t\t\tname: users[email].properties.users[0].name,\n\t\t\t\tyear: users[email].properties.users[0].year,\n\t\t\t\tlocation: users[email].geometry.coordinates,\n\t\t\t\tuserData: users[email].properties.users\n\t\t\t};\n\t\t});\n\t} else {\n\t\toptions = [];\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t<div className=\"top_left\">\n\t\t\t\t\t<p style={{marginBottom: 5}}>Long: {lng} | Lat: {lat}<br />Add yourself to the map!</p>\n\t\t\t\t\n\t\t\t\t\t<IconButton style={{marginRight:10}} color=\"primary\" onClick={()=>setSearch(true)}>\n\t\t\t\t\t\t<SearchIcon />\n\t\t\t\t\t</IconButton>\n\t\t\t\t\t<Button className=\"action_button\" size=\"small\" variant=\"contained\" href=\"https://docs.google.com/forms/d/e/1FAIpQLSdV4LNX-1XjJCtvneYMH1V4d6UdABtJRtr1LOJOM272fc4HOQ/viewform?usp=sf_link\">\n    add yourself\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"top_right\">\n\t\t\t\t\t<p>Roommate seekers</p>\n\n\t\t\t\t\t<div className=\"inner_content\">{displayRoommates ? displayUsers():null}</div>\n\t\t\t\t\t{users ? <div style={{justifyContent: \"center\", display: \"flex\"}}>\n\t\t\t\t\t\t<IconButton aria-label=\"expand\" color=\"primary\" onClick={() => setDisplayRoommates(!displayRoommates)}>\n\t\t\t\t\t\t\t{displayRoommates ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</div>:null}\n\t\t\t\t\t\n\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</ThemeProvider>\n\t\t\t<div ref={mapContainer} className=\"map-container\" />\n\t\t\t<Modal center \n\t\t\t\tclassNames={{\n\t\t\t\t\toverlay: \"customOverlay\",\n\t\t\t\t\tmodal: \"customModal\",\n\t\t\t\t}}\n\t\t\t\topen={search} onClose={() => setSearch(false)}>\n\t\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t\t<Autocomplete \n\t\t\t\t\t\toptions={options}\n\t\t\t\t\t\tisOptionEqualToValue={(option, value) => option.email === value.email}\n\t\t\t\t\t\tgetOptionLabel={(option) => option.name}\n\t\t\t\t\t\tautoComplete\n\t\t\t\t\t\trenderInput={(params) => <TextField {...params} />}\n\t\t\t\t\t\trenderOption={(props, option) => <li {...props} key={option.email}>{option.name} (&lsquo;{option.year})</li>}\n\t\t\t\t\t\tsx={{color: \"black\"}}\n\t\t\t\t\t\tonChange={(e, val) => {\n\t\t\t\t\t\t\tsetSearch(false);\n\t\t\t\t\t\t\tmap.current.flyTo(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tcenter: val.location,\n\t\t\t\t\t\t\t\t\tzoom: 13\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tconst myPopup = formPopup(val.userData);\n\t\t\t\t\t\t\taddPopup(myPopup, val.location);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t\n\t\t\t\t\t/>\n\t\t\t\t</ThemeProvider>\n\t\t\t</Modal>\n\t\t</div>\n\n\t);\n}","const reportWebVitals = onPerfEntry => {\n\tif (onPerfEntry && onPerfEntry instanceof Function) {\n\t\timport(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n\t\t\tgetCLS(onPerfEntry);\n\t\t\tgetFID(onPerfEntry);\n\t\t\tgetFCP(onPerfEntry);\n\t\t\tgetLCP(onPerfEntry);\n\t\t\tgetTTFB(onPerfEntry);\n\t\t});\n\t}\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}