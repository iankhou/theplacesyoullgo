{"ast":null,"code":"Object.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.hasCustomRenderer = exports.getComponent = exports.isFunction = exports.getCalendarIntervalErrorMessage = exports.queryFormatMillisecondsMap = exports.suggestionTypes = exports.getTopSuggestions = exports.withClickIds = exports.getCompositeAggsQuery = exports.getAggsQuery = exports.extractQueryFromDefaultQuery = exports.updateInternalQuery = exports.getSearchState = exports.extractQueryFromCustomQuery = exports.getOptionsForCustomQuery = exports.getOptionsFromQuery = exports.parseHits = exports.handleA11yAction = exports.getInnerKey = exports.getClassName = exports.checkSomePropChange = exports.checkPropChange = exports.updateDefaultQuery = exports.updateCustomQuery = undefined;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.isEqual = isEqual;\nexports.compareQueries = compareQueries;\nexports.debounce = debounce;\nexports.getQueryOptions = getQueryOptions;\nexports.buildQuery = buildQuery;\nexports.pushToAndClause = pushToAndClause;\nexports.checkValueChange = checkValueChange;\nexports.getAggsOrder = getAggsOrder;\nexports.formatDate = formatDate;\nexports.getResultStats = getResultStats;\nexports.extractFieldsFromSource = extractFieldsFromSource;\nexports.normalizeDataField = normalizeDataField;\nexports.handleOnSuggestions = handleOnSuggestions;\nexports.isValidDateRangeQueryFormat = isValidDateRangeQueryFormat;\n\nvar _dateFormats = require('./dateFormats');\n\nvar _dateFormats2 = _interopRequireDefault(_dateFormats);\n\nvar _suggestions = require('./suggestions');\n\nvar _suggestions2 = _interopRequireDefault(_suggestions);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar updateCustomQuery = exports.updateCustomQuery = function updateCustomQuery(componentId, props, value) {\n  if (props.customQuery && typeof props.customQuery === 'function') {\n    props.setCustomQuery(componentId, props.customQuery(value, props));\n  }\n};\n\nvar updateDefaultQuery = exports.updateDefaultQuery = function updateDefaultQuery(componentId, props, value) {\n  if (props.defaultQuery && typeof props.defaultQuery === 'function') {\n    props.setDefaultQuery(componentId, props.defaultQuery(value, props));\n  }\n};\n\nfunction isEqual(x, y) {\n  if (x === y) return true;\n  if (!(x instanceof Object) || !(y instanceof Object)) return false;\n  if (x.constructor !== y.constructor) return false;\n\n  for (var p in x) {\n    if (!x.hasOwnProperty(p)) continue;\n    if (!y.hasOwnProperty(p)) return false;\n    if (x[p] === y[p]) continue;\n    if (typeof x[p] !== 'object') return false;\n    if (!isEqual(x[p], y[p])) return false;\n  }\n\n  for (var _p in y) {\n    if (y.hasOwnProperty(_p) && !x.hasOwnProperty(_p)) return false;\n  }\n\n  return true;\n}\n\nfunction compareQueries(x, y) {\n  try {\n    return isEqual(JSON.parse(JSON.stringify(x)), JSON.parse(JSON.stringify(y)));\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction debounce(callback, wait) {\n  var context = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this;\n  var timeout = null;\n  var callbackArgs = null;\n\n  var later = function later() {\n    return callback.apply(context, callbackArgs);\n  };\n\n  return function debouncedFunction() {\n    callbackArgs = arguments;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n}\n\nfunction getQueryOptions(props) {\n  var options = {};\n\n  if (props.size !== undefined) {\n    options.size = props.size;\n  }\n\n  if (props.includeFields || props.excludeFields) {\n    var source = {};\n\n    if (props.includeFields) {\n      source.includes = props.includeFields;\n    }\n\n    if (props.excludeFields) {\n      source.excludes = props.excludeFields;\n    }\n\n    options._source = source;\n  }\n\n  return options;\n}\n\nfunction getOperation(conjunction) {\n  if (conjunction === 'and') {\n    return 'must';\n  }\n\n  if (conjunction === 'or') {\n    return 'should';\n  }\n\n  return 'must_not';\n}\n\nfunction createBoolQuery(operation, query) {\n  var resultQuery = null;\n\n  if (Array.isArray(query) && query.length || !Array.isArray(query) && query) {\n    resultQuery = {\n      bool: _defineProperty({}, operation, query)\n    };\n  }\n\n  if (operation === 'should' && resultQuery) {\n    resultQuery = {\n      bool: _extends({}, resultQuery.bool, {\n        minimum_should_match: 1\n      })\n    };\n  }\n\n  return resultQuery;\n}\n\nfunction getQuery(react, queryList) {\n  var query = [];\n  Object.keys(react).forEach(function (conjunction) {\n    if (Array.isArray(react[conjunction])) {\n      var operation = getOperation(conjunction);\n      var queryArr = react[conjunction].map(function (comp) {\n        if (typeof comp !== 'string') {\n          return getQuery(comp, queryList);\n        } else if (comp in queryList) {\n          if (queryList[comp] && Object.keys(queryList[comp]).length) {\n            return queryList[comp];\n          }\n        }\n\n        return null;\n      }).filter(function (item) {\n        return !!item;\n      });\n      var boolQuery = createBoolQuery(operation, queryArr);\n\n      if (boolQuery && Object.keys(boolQuery).length) {\n        query = [].concat(_toConsumableArray(query), [boolQuery]);\n      }\n    } else if (typeof react[conjunction] === 'string') {\n      var _operation = getOperation(conjunction);\n\n      var _boolQuery = createBoolQuery(_operation, queryList[react[conjunction]]);\n\n      if (_boolQuery && Object.keys(_boolQuery).length) {\n        query = [].concat(_toConsumableArray(query), [_boolQuery]);\n      }\n    } else if (typeof react[conjunction] === 'object' && react[conjunction] !== null) {\n      var _boolQuery2 = getQuery(react[conjunction], queryList);\n\n      if (_boolQuery2 && Object.keys(_boolQuery2).length) {\n        query = [].concat(_toConsumableArray(query), [_boolQuery2]);\n      }\n    }\n  });\n\n  if (Array.isArray(query) && query.length) {\n    return {\n      bool: {\n        must: query\n      }\n    };\n  }\n\n  if (query && Object.keys(query).length) {\n    return query;\n  }\n\n  return null;\n}\n\nfunction getExternalQueryOptions(react, options, component) {\n  var queryOptions = {};\n  Object.keys(react).forEach(function (conjunction) {\n    if (Array.isArray(react[conjunction])) {\n      react[conjunction].forEach(function (comp) {\n        if (options[comp]) {\n          queryOptions = _extends({}, queryOptions, options[comp]);\n        }\n      });\n    } else if (typeof react[conjunction] === 'string') {\n      if (options[react[conjunction]]) {\n        queryOptions = _extends({}, queryOptions, options[react[conjunction]]);\n      }\n    } else if (typeof react[conjunction] === 'object' && react[conjunction] !== null && !Array.isArray(react[conjunction])) {\n      queryOptions = _extends({}, queryOptions, getExternalQueryOptions(react[conjunction], options));\n    }\n  });\n\n  if (options[component]) {\n    queryOptions = _extends({}, queryOptions, options[component]);\n  }\n\n  return queryOptions;\n}\n\nfunction buildQuery(component, dependencyTree, queryList, queryOptions) {\n  var queryObj = null;\n  var options = null;\n\n  if (component in dependencyTree) {\n    queryObj = getQuery(dependencyTree[component], queryList);\n    options = getExternalQueryOptions(dependencyTree[component], queryOptions, component);\n  }\n\n  return {\n    queryObj: queryObj,\n    options: options\n  };\n}\n\nfunction pushToAndClause(reactProp, component) {\n  var react = _extends({}, reactProp);\n\n  if (react.and) {\n    if (Array.isArray(react.and)) {\n      react.and = [].concat(_toConsumableArray(react.and), [component]);\n      return react;\n    } else if (typeof react.and === 'string') {\n      react.and = [react.and, component];\n      return react;\n    }\n\n    react.and = pushToAndClause(react.and, component);\n    return react;\n  }\n\n  return _extends({}, react, {\n    and: component\n  });\n}\n\nfunction checkValueChange(componentId, value, beforeValueChange, performUpdate) {\n  var selectedValue = value;\n\n  if (Array.isArray(value) && !value.length) {\n    selectedValue = null;\n  }\n\n  var handleError = function handleError(e) {\n    console.warn(componentId + ' - beforeValueChange rejected the promise with ', e);\n  };\n\n  if (beforeValueChange) {\n    try {\n      var promise = beforeValueChange(selectedValue);\n\n      if (promise instanceof Promise) {\n        promise.then(performUpdate).catch(handleError);\n      } else {\n        performUpdate();\n      }\n    } catch (e) {\n      handleError(e);\n    }\n  } else {\n    performUpdate();\n  }\n}\n\nfunction getAggsOrder(sortBy) {\n  if (sortBy === 'count') {\n    return {\n      _count: 'desc'\n    };\n  }\n\n  return {\n    _key: sortBy\n  };\n}\n\nvar checkPropChange = exports.checkPropChange = function checkPropChange(prevProp, nextProp, callback) {\n  if (!isEqual(prevProp, nextProp)) {\n    callback();\n    return true;\n  }\n\n  return false;\n};\n\nvar checkSomePropChange = exports.checkSomePropChange = function checkSomePropChange() {\n  var prevProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var nextProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var propsList = arguments[2];\n  var callback = arguments[3];\n  propsList.some(function (prop) {\n    return checkPropChange(prevProps[prop], nextProps[prop], callback);\n  });\n};\n\nvar getClassName = exports.getClassName = function getClassName(classMap, component) {\n  return classMap && classMap[component] || '';\n};\n\nvar getInnerKey = exports.getInnerKey = function getInnerKey(obj, key) {\n  return obj && obj[key] || {};\n};\n\nvar handleA11yAction = exports.handleA11yAction = function handleA11yAction(e, callback) {\n  if (e.key === 'Enter' || e.key === ' ') {\n    e.preventDefault();\n    callback();\n  }\n};\n\nvar highlightResults = function highlightResults(result) {\n  var data = _extends({}, result);\n\n  if (data.highlight) {\n    Object.keys(data.highlight).forEach(function (highlightItem) {\n      var highlightValue = data.highlight[highlightItem][0];\n      data._source = _extends({}, data._source, _defineProperty({}, highlightItem, highlightValue));\n    });\n  }\n\n  return data;\n};\n\nvar parseHits = exports.parseHits = function parseHits(hits) {\n  var showHighlighted = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var results = null;\n\n  if (hits) {\n    results = [].concat(_toConsumableArray(hits)).map(function (item) {\n      var data = _extends({}, item);\n\n      if (showHighlighted) data = highlightResults(item);\n      var result = Object.keys(data).filter(function (key) {\n        return key !== '_source';\n      }).reduce(function (obj, key) {\n        obj[key] = data[key];\n        return obj;\n      }, _extends({\n        highlight: data.highlight || {}\n      }, data._source));\n      return result;\n    });\n  }\n\n  return results;\n};\n\nfunction formatDate(date, props) {\n  if (props.parseDate) {\n    return props.parseDate(date, props);\n  }\n\n  switch (props.queryFormat) {\n    case 'epoch_millis':\n      return date.getTime();\n\n    case 'epoch_second':\n      return Math.floor(date.getTime() / 1000);\n\n    default:\n      {\n        if (_dateFormats2.default[props.queryFormat]) {\n          return date.toString(_dateFormats2.default[props.queryFormat]);\n        }\n\n        return date.getTime();\n      }\n  }\n}\n\nvar getOptionsFromQuery = function getOptionsFromQuery() {\n  var customQuery = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  if (customQuery) {\n    var query = customQuery.query,\n        rest = _objectWithoutProperties(customQuery, ['query']);\n\n    return Object.keys(rest).length ? rest : null;\n  }\n\n  return null;\n};\n\nexports.getOptionsFromQuery = getOptionsFromQuery;\n\nvar getOptionsForCustomQuery = function getOptionsForCustomQuery() {\n  var customQuery = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  if (customQuery) {\n    var query = customQuery.query,\n        id = customQuery.id,\n        params = customQuery.params,\n        rest = _objectWithoutProperties(customQuery, ['query', 'id', 'params']);\n\n    return Object.keys(rest).length ? rest : null;\n  }\n\n  return null;\n};\n\nexports.getOptionsForCustomQuery = getOptionsForCustomQuery;\n\nvar extractQueryFromCustomQuery = exports.extractQueryFromCustomQuery = function extractQueryFromCustomQuery(customQuery) {\n  if (customQuery) {\n    if (customQuery.id) {\n      return {\n        id: customQuery.id,\n        params: customQuery.params\n      };\n    }\n\n    return customQuery.query;\n  }\n\n  return null;\n};\n\nfunction computeResultStats(hits, searchState, promotedResults) {\n  Object.keys(hits).forEach(function (componentId) {\n    var _ref = hits[componentId] || {},\n        hidden = _ref.hidden,\n        total = _ref.total,\n        time = _ref.time;\n\n    searchState[componentId] = _extends({}, searchState[componentId], {\n      resultStats: _extends({}, searchState[componentId].resultStats, {\n        numberOfResults: total,\n        time: time,\n        promoted: promotedResults[componentId] && promotedResults[componentId].length,\n        hidden: hidden || 0\n      })\n    });\n  });\n}\n\nvar getSearchState = exports.getSearchState = function getSearchState() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var forHeaders = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var selectedValues = state.selectedValues,\n      queryLog = state.queryLog,\n      dependencyTree = state.dependencyTree,\n      props = state.props,\n      hits = state.hits,\n      aggregations = state.aggregations,\n      isLoading = state.isLoading,\n      error = state.error,\n      promotedResults = state.promotedResults,\n      settings = state.settings,\n      customData = state.customData,\n      rawData = state.rawData;\n  var searchState = {};\n\n  var populateState = function populateState() {\n    var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var key = arguments[1];\n    return Object.keys(obj).forEach(function (componentId) {\n      searchState[componentId] = _extends({}, searchState[componentId], key ? _defineProperty({}, key, obj[componentId]) : obj[componentId]);\n    });\n  };\n\n  populateState(props);\n  Object.keys(selectedValues).forEach(function (componentId) {\n    var componentState = searchState[componentId];\n    var selectedValue = selectedValues[componentId];\n\n    if (selectedValue) {\n      searchState[componentId] = _extends({}, componentState, _extends({\n        title: selectedValue.label,\n        componentType: selectedValue.componentType,\n        value: selectedValue.value\n      }, selectedValue.category && {\n        category: selectedValue.category\n      }, {\n        URLParams: selectedValue.URLParams\n      }));\n    }\n  });\n\n  if (!forHeaders) {\n    populateState(queryLog);\n    populateState(hits, 'hits');\n    populateState(aggregations, 'aggregations');\n    populateState(isLoading, 'isLoading');\n    populateState(error, 'error');\n    populateState(promotedResults, 'promotedData');\n    populateState(settings, 'settings');\n    populateState(customData, 'customData');\n    populateState(rawData, 'rawData');\n    computeResultStats(hits, searchState, promotedResults);\n  }\n\n  populateState(dependencyTree, 'react');\n  return searchState;\n};\n\nvar updateInternalQuery = exports.updateInternalQuery = function updateInternalQuery(componentId, queryOptions, value, props, defaultQueryToExecute, queryParams) {\n  var defaultQuery = props.defaultQuery;\n  var defaultQueryOptions = void 0;\n  var query = void 0;\n\n  if (defaultQuery) {\n    var queryTobeSet = defaultQuery(value, props);\n\n    var _ref3 = queryTobeSet || {};\n\n    query = _ref3.query;\n    defaultQueryOptions = getOptionsFromQuery(queryTobeSet);\n    updateDefaultQuery(componentId, props, value);\n  }\n\n  props.setQueryOptions(componentId, _extends({}, defaultQueryOptions, queryOptions || defaultQueryToExecute));\n\n  if (query) {\n    props.updateQuery(_extends({\n      componentId: componentId,\n      query: query,\n      value: value\n    }, queryParams));\n  }\n};\n\nvar extractQueryFromDefaultQuery = function extractQueryFromDefaultQuery(props, value) {\n  var queryToBeReturned = {};\n  var defaultQuery = props.defaultQuery;\n\n  if (defaultQuery) {\n    var evaluateQuery = defaultQuery(value, props);\n\n    if (evaluateQuery) {\n      var query = evaluateQuery.query,\n          options = _objectWithoutProperties(evaluateQuery, ['query']);\n\n      if (options) {\n        queryToBeReturned = options;\n      }\n    }\n  }\n\n  return queryToBeReturned;\n};\n\nexports.extractQueryFromDefaultQuery = extractQueryFromDefaultQuery;\n\nvar getAggsQuery = exports.getAggsQuery = function getAggsQuery(value, query, props) {\n  var clonedQuery = query;\n  var dataField = props.dataField,\n      size = props.size,\n      sortBy = props.sortBy,\n      showMissing = props.showMissing,\n      missingLabel = props.missingLabel;\n  clonedQuery.size = 0;\n  clonedQuery.aggs = _defineProperty({}, dataField, {\n    terms: _extends({\n      field: dataField,\n      size: size,\n      order: getAggsOrder(sortBy || 'count')\n    }, showMissing ? {\n      missing: missingLabel\n    } : {})\n  });\n\n  if (props.nestedField) {\n    clonedQuery.aggs = {\n      reactivesearch_nested: {\n        nested: {\n          path: props.nestedField\n        },\n        aggs: clonedQuery.aggs\n      }\n    };\n  }\n\n  return _extends({}, clonedQuery, extractQueryFromDefaultQuery(props, value));\n};\n\nvar getCompositeAggsQuery = exports.getCompositeAggsQuery = function getCompositeAggsQuery() {\n  var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref4$query = _ref4.query,\n      query = _ref4$query === undefined ? {} : _ref4$query,\n      props = _ref4.props,\n      _ref4$after = _ref4.after,\n      after = _ref4$after === undefined ? null : _ref4$after,\n      _ref4$showTopHits = _ref4.showTopHits,\n      showTopHits = _ref4$showTopHits === undefined ? false : _ref4$showTopHits,\n      value = _ref4.value;\n\n  var clonedQuery = query;\n  var dataField = props.dataField,\n      size = props.size,\n      sortBy = props.sortBy,\n      showMissing = props.showMissing,\n      aggregationField = props.aggregationField;\n  var finalField = aggregationField || dataField;\n  var order = sortBy === 'count' ? {} : {\n    order: sortBy\n  };\n  clonedQuery.aggs = _defineProperty({}, finalField, _extends({\n    composite: _extends({\n      sources: [_defineProperty({}, finalField, {\n        terms: _extends({\n          field: finalField\n        }, order, showMissing ? {\n          missing_bucket: true\n        } : {})\n      })],\n      size: size\n    }, after)\n  }, showTopHits ? {\n    aggs: _defineProperty({}, finalField, {\n      top_hits: {\n        size: 1\n      }\n    })\n  } : {}));\n  clonedQuery.size = 0;\n\n  if (props.nestedField) {\n    clonedQuery.aggs = {\n      reactivesearch_nested: {\n        nested: {\n          path: props.nestedField\n        },\n        aggs: clonedQuery.aggs\n      }\n    };\n  }\n\n  return _extends({}, clonedQuery, extractQueryFromDefaultQuery(props, value));\n};\n\nvar withClickIds = exports.withClickIds = function withClickIds() {\n  var results = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return results.map(function (result, index) {\n    return _extends({}, result, {\n      _click_id: index\n    });\n  });\n};\n\nfunction getResultStats(props) {\n  var total = props.total,\n      size = props.size,\n      time = props.time,\n      hidden = props.hidden,\n      promotedResults = props.promotedResults;\n  return _extends({\n    numberOfResults: total\n  }, size > 0 ? {\n    numberOfPages: Math.ceil(total / size)\n  } : null, {\n    time: time || 0,\n    hidden: hidden,\n    promoted: promotedResults && promotedResults.length\n  });\n}\n\nfunction extractFieldsFromSource(esSource) {\n  function getFields() {\n    var source = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    return Object.keys(source).reduce(function () {\n      var acc = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var k = arguments[1];\n      var key = prefix ? prefix + '.' + k : k;\n\n      if (!Number.isNaN(parseInt(k, 10))) {\n        key = prefix || k;\n      }\n\n      if (source[k] && typeof source[k] === 'object') {\n        return _extends({}, acc, getFields(source[k], key));\n      }\n\n      return _extends({}, acc, _defineProperty({}, key, true));\n    }, []);\n  }\n\n  var fields = getFields(esSource);\n  return Object.keys(fields);\n}\n\nfunction normalizeDataField(dataField) {\n  var fieldWeights = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  if (typeof dataField === 'string') {\n    return [{\n      field: dataField,\n      weight: fieldWeights.length ? fieldWeights[0] : undefined\n    }];\n  }\n\n  if (Array.isArray(dataField)) {\n    return dataField.map(function (field, index) {\n      var normalizedField = {};\n\n      if (typeof field === 'string') {\n        normalizedField.field = field;\n\n        if (fieldWeights.length > index) {\n          normalizedField.weight = fieldWeights[index];\n        }\n      } else if (typeof field === 'object' && field && field.field) {\n        normalizedField.field = field.field;\n        normalizedField.weight = field.weight;\n      }\n\n      return normalizedField;\n    });\n  }\n\n  if (typeof dataField === 'object' && dataField) {\n    return [{\n      field: dataField.field,\n      weight: dataField.weight\n    }];\n  }\n\n  return [];\n}\n\nfunction handleOnSuggestions(results, currentValue, props) {\n  var parseSuggestion = props.parseSuggestion,\n      promotedResults = props.promotedResults,\n      enablePredictiveSuggestions = props.enablePredictiveSuggestions;\n  var fields = [];\n\n  if (props.dataField) {\n    fields = normalizeDataField(props.dataField).map(function (f) {\n      return f.field;\n    });\n  } else if (results && Array.isArray(results) && results.length > 0 && results[0] && results[0]._source) {\n    fields = extractFieldsFromSource(results[0]._source);\n  }\n\n  var newResults = parseHits(results, false);\n  var parsedPromotedResults = parseHits(promotedResults, false);\n\n  if (parsedPromotedResults && parsedPromotedResults.length) {\n    var ids = parsedPromotedResults.map(function (item) {\n      return item._id;\n    }).filter(Boolean);\n\n    if (ids) {\n      newResults = newResults.filter(function (item) {\n        return !ids.includes(item._id);\n      });\n    }\n\n    newResults = [].concat(_toConsumableArray(parsedPromotedResults), _toConsumableArray(newResults));\n  }\n\n  var parsedSuggestions = (0, _suggestions2.default)({\n    fields: fields,\n    suggestions: newResults,\n    currentValue: currentValue.toLowerCase(),\n    showDistinctSuggestions: props.showDistinctSuggestions,\n    enablePredictiveSuggestions: enablePredictiveSuggestions,\n    enableSynonyms: props.enableSynonyms\n  });\n\n  if (parseSuggestion) {\n    return parsedSuggestions.map(function (suggestion) {\n      return parseSuggestion(suggestion);\n    });\n  }\n\n  return parsedSuggestions;\n}\n\nvar getTopSuggestions = exports.getTopSuggestions = function getTopSuggestions(querySuggestions) {\n  var currentValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var showDistinctSuggestions = arguments[2];\n  var parsedSuggestions = parseHits(querySuggestions, false);\n  var finalSuggestions = (0, _suggestions2.default)({\n    fields: ['key', 'key.autosuggest', 'key.search'],\n    suggestions: parsedSuggestions || [],\n    currentValue: currentValue.toLowerCase(),\n    showDistinctSuggestions: showDistinctSuggestions\n  });\n  return withClickIds(finalSuggestions);\n};\n\nfunction isValidDateRangeQueryFormat(queryFormat) {\n  return Object.keys(_dateFormats2.default).includes(queryFormat);\n}\n\nvar suggestionTypes = exports.suggestionTypes = {\n  Popular: 'popular',\n  Index: 'index',\n  Recent: 'recent',\n  Promoted: 'promoted'\n};\nvar queryFormatMillisecondsMap = exports.queryFormatMillisecondsMap = {\n  minute: 60000,\n  hour: 3600000,\n  day: 86400000,\n  week: 604800000,\n  month: 2629746000,\n  quarter: 7889238000,\n  year: 31556952000\n};\n\nvar getCalendarIntervalErrorMessage = exports.getCalendarIntervalErrorMessage = function getCalendarIntervalErrorMessage(totalRange) {\n  var calendarInterval = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'minute';\n  var queryFormatMillisecondsMapKeys = Object.keys(queryFormatMillisecondsMap);\n  var indexOfCurrentCalendarInterval = queryFormatMillisecondsMapKeys.indexOf(calendarInterval);\n\n  if (indexOfCurrentCalendarInterval === -1) {\n    console.error('Invalid calendarInterval Passed');\n  }\n\n  if (calendarInterval === 'year') {\n    return 'Try using a shorter range of values.';\n  }\n\n  for (var index = indexOfCurrentCalendarInterval + 1; index < queryFormatMillisecondsMapKeys.length; index += 1) {\n    if (totalRange / Object.values(queryFormatMillisecondsMap)[index] <= 100) {\n      var calendarIntervalKey = queryFormatMillisecondsMapKeys[index];\n      return {\n        errorMessage: 'Please pass calendarInterval prop with value greater than or equal to a `' + calendarIntervalKey + '` for a meaningful resolution of histogram.',\n        calculatedCalendarInterval: calendarIntervalKey\n      };\n    }\n  }\n\n  return {\n    errorMessage: 'Try using a shorter range of values.',\n    calculatedCalendarInterval: 'year'\n  };\n};\n\nvar isFunction = exports.isFunction = function isFunction(element) {\n  return typeof element === 'function';\n};\n\nvar getComponent = exports.getComponent = function getComponent() {\n  var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var children = props.children,\n      render = props.render;\n\n  if (isFunction(children)) {\n    return children(data);\n  }\n\n  if (isFunction(render)) {\n    return render(data);\n  }\n\n  return null;\n};\n\nvar hasCustomRenderer = exports.hasCustomRenderer = function hasCustomRenderer() {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var render = props.render,\n      children = props.children;\n  return isFunction(children) || isFunction(render);\n};","map":{"version":3,"sources":["/Users/ikh/localdev/otpyg/node_modules/@appbaseio/reactivecore/lib/utils/helper.js"],"names":["Object","defineProperty","exports","value","hasCustomRenderer","getComponent","isFunction","getCalendarIntervalErrorMessage","queryFormatMillisecondsMap","suggestionTypes","getTopSuggestions","withClickIds","getCompositeAggsQuery","getAggsQuery","extractQueryFromDefaultQuery","updateInternalQuery","getSearchState","extractQueryFromCustomQuery","getOptionsForCustomQuery","getOptionsFromQuery","parseHits","handleA11yAction","getInnerKey","getClassName","checkSomePropChange","checkPropChange","updateDefaultQuery","updateCustomQuery","undefined","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","isEqual","compareQueries","debounce","getQueryOptions","buildQuery","pushToAndClause","checkValueChange","getAggsOrder","formatDate","getResultStats","extractFieldsFromSource","normalizeDataField","handleOnSuggestions","isValidDateRangeQueryFormat","_dateFormats","require","_dateFormats2","_interopRequireDefault","_suggestions","_suggestions2","obj","__esModule","default","_objectWithoutProperties","keys","indexOf","_toConsumableArray","arr","Array","isArray","arr2","from","_defineProperty","enumerable","configurable","writable","componentId","props","customQuery","setCustomQuery","defaultQuery","setDefaultQuery","x","y","constructor","p","_p","JSON","parse","stringify","e","callback","wait","context","timeout","callbackArgs","later","apply","debouncedFunction","clearTimeout","setTimeout","options","size","includeFields","excludeFields","includes","excludes","_source","getOperation","conjunction","createBoolQuery","operation","query","resultQuery","bool","minimum_should_match","getQuery","react","queryList","forEach","queryArr","map","comp","filter","item","boolQuery","concat","_operation","_boolQuery","_boolQuery2","must","getExternalQueryOptions","component","queryOptions","dependencyTree","queryObj","reactProp","and","beforeValueChange","performUpdate","selectedValue","handleError","console","warn","promise","Promise","then","catch","sortBy","_count","_key","prevProp","nextProp","prevProps","nextProps","propsList","some","prop","classMap","preventDefault","highlightResults","result","data","highlight","highlightItem","highlightValue","hits","showHighlighted","results","reduce","date","parseDate","queryFormat","getTime","Math","floor","toString","rest","id","params","computeResultStats","searchState","promotedResults","_ref","hidden","total","time","resultStats","numberOfResults","promoted","state","forHeaders","selectedValues","queryLog","aggregations","isLoading","error","settings","customData","rawData","populateState","componentState","title","label","componentType","category","URLParams","defaultQueryToExecute","queryParams","defaultQueryOptions","queryTobeSet","_ref3","setQueryOptions","updateQuery","queryToBeReturned","evaluateQuery","clonedQuery","dataField","showMissing","missingLabel","aggs","terms","field","order","missing","nestedField","reactivesearch_nested","nested","path","_ref4","_ref4$query","_ref4$after","after","_ref4$showTopHits","showTopHits","aggregationField","finalField","composite","sources","missing_bucket","top_hits","index","_click_id","numberOfPages","ceil","esSource","getFields","prefix","acc","k","Number","isNaN","parseInt","fields","fieldWeights","weight","normalizedField","currentValue","parseSuggestion","enablePredictiveSuggestions","f","newResults","parsedPromotedResults","ids","_id","Boolean","parsedSuggestions","suggestions","toLowerCase","showDistinctSuggestions","enableSynonyms","suggestion","querySuggestions","finalSuggestions","Popular","Index","Recent","Promoted","minute","hour","day","week","month","quarter","year","totalRange","calendarInterval","queryFormatMillisecondsMapKeys","indexOfCurrentCalendarInterval","values","calendarIntervalKey","errorMessage","calculatedCalendarInterval","element","children","render"],"mappings":"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","sourcesContent":["Object.defineProperty(exports,\"__esModule\",{value:true});exports.hasCustomRenderer=exports.getComponent=exports.isFunction=exports.getCalendarIntervalErrorMessage=exports.queryFormatMillisecondsMap=exports.suggestionTypes=exports.getTopSuggestions=exports.withClickIds=exports.getCompositeAggsQuery=exports.getAggsQuery=exports.extractQueryFromDefaultQuery=exports.updateInternalQuery=exports.getSearchState=exports.extractQueryFromCustomQuery=exports.getOptionsForCustomQuery=exports.getOptionsFromQuery=exports.parseHits=exports.handleA11yAction=exports.getInnerKey=exports.getClassName=exports.checkSomePropChange=exports.checkPropChange=exports.updateDefaultQuery=exports.updateCustomQuery=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};exports.isEqual=isEqual;exports.compareQueries=compareQueries;exports.debounce=debounce;exports.getQueryOptions=getQueryOptions;exports.buildQuery=buildQuery;exports.pushToAndClause=pushToAndClause;exports.checkValueChange=checkValueChange;exports.getAggsOrder=getAggsOrder;exports.formatDate=formatDate;exports.getResultStats=getResultStats;exports.extractFieldsFromSource=extractFieldsFromSource;exports.normalizeDataField=normalizeDataField;exports.handleOnSuggestions=handleOnSuggestions;exports.isValidDateRangeQueryFormat=isValidDateRangeQueryFormat;var _dateFormats=require('./dateFormats');var _dateFormats2=_interopRequireDefault(_dateFormats);var _suggestions=require('./suggestions');var _suggestions2=_interopRequireDefault(_suggestions);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i];}return target;}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var updateCustomQuery=exports.updateCustomQuery=function updateCustomQuery(componentId,props,value){if(props.customQuery&&typeof props.customQuery==='function'){props.setCustomQuery(componentId,props.customQuery(value,props));}};var updateDefaultQuery=exports.updateDefaultQuery=function updateDefaultQuery(componentId,props,value){if(props.defaultQuery&&typeof props.defaultQuery==='function'){props.setDefaultQuery(componentId,props.defaultQuery(value,props));}};function isEqual(x,y){if(x===y)return true;if(!(x instanceof Object)||!(y instanceof Object))return false;if(x.constructor!==y.constructor)return false;for(var p in x){if(!x.hasOwnProperty(p))continue;if(!y.hasOwnProperty(p))return false;if(x[p]===y[p])continue;if(typeof x[p]!=='object')return false;if(!isEqual(x[p],y[p]))return false;}for(var _p in y){if(y.hasOwnProperty(_p)&&!x.hasOwnProperty(_p))return false;}return true;}function compareQueries(x,y){try{return isEqual(JSON.parse(JSON.stringify(x)),JSON.parse(JSON.stringify(y)));}catch(e){return false;}}function debounce(callback,wait){var context=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this;var timeout=null;var callbackArgs=null;var later=function later(){return callback.apply(context,callbackArgs);};return function debouncedFunction(){callbackArgs=arguments;clearTimeout(timeout);timeout=setTimeout(later,wait);};}function getQueryOptions(props){var options={};if(props.size!==undefined){options.size=props.size;}if(props.includeFields||props.excludeFields){var source={};if(props.includeFields){source.includes=props.includeFields;}if(props.excludeFields){source.excludes=props.excludeFields;}options._source=source;}return options;}function getOperation(conjunction){if(conjunction==='and'){return'must';}if(conjunction==='or'){return'should';}return'must_not';}function createBoolQuery(operation,query){var resultQuery=null;if(Array.isArray(query)&&query.length||!Array.isArray(query)&&query){resultQuery={bool:_defineProperty({},operation,query)};}if(operation==='should'&&resultQuery){resultQuery={bool:_extends({},resultQuery.bool,{minimum_should_match:1})};}return resultQuery;}function getQuery(react,queryList){var query=[];Object.keys(react).forEach(function(conjunction){if(Array.isArray(react[conjunction])){var operation=getOperation(conjunction);var queryArr=react[conjunction].map(function(comp){if(typeof comp!=='string'){return getQuery(comp,queryList);}else if(comp in queryList){if(queryList[comp]&&Object.keys(queryList[comp]).length){return queryList[comp];}}return null;}).filter(function(item){return!!item;});var boolQuery=createBoolQuery(operation,queryArr);if(boolQuery&&Object.keys(boolQuery).length){query=[].concat(_toConsumableArray(query),[boolQuery]);}}else if(typeof react[conjunction]==='string'){var _operation=getOperation(conjunction);var _boolQuery=createBoolQuery(_operation,queryList[react[conjunction]]);if(_boolQuery&&Object.keys(_boolQuery).length){query=[].concat(_toConsumableArray(query),[_boolQuery]);}}else if(typeof react[conjunction]==='object'&&react[conjunction]!==null){var _boolQuery2=getQuery(react[conjunction],queryList);if(_boolQuery2&&Object.keys(_boolQuery2).length){query=[].concat(_toConsumableArray(query),[_boolQuery2]);}}});if(Array.isArray(query)&&query.length){return{bool:{must:query}};}if(query&&Object.keys(query).length){return query;}return null;}function getExternalQueryOptions(react,options,component){var queryOptions={};Object.keys(react).forEach(function(conjunction){if(Array.isArray(react[conjunction])){react[conjunction].forEach(function(comp){if(options[comp]){queryOptions=_extends({},queryOptions,options[comp]);}});}else if(typeof react[conjunction]==='string'){if(options[react[conjunction]]){queryOptions=_extends({},queryOptions,options[react[conjunction]]);}}else if(typeof react[conjunction]==='object'&&react[conjunction]!==null&&!Array.isArray(react[conjunction])){queryOptions=_extends({},queryOptions,getExternalQueryOptions(react[conjunction],options));}});if(options[component]){queryOptions=_extends({},queryOptions,options[component]);}return queryOptions;}function buildQuery(component,dependencyTree,queryList,queryOptions){var queryObj=null;var options=null;if(component in dependencyTree){queryObj=getQuery(dependencyTree[component],queryList);options=getExternalQueryOptions(dependencyTree[component],queryOptions,component);}return{queryObj:queryObj,options:options};}function pushToAndClause(reactProp,component){var react=_extends({},reactProp);if(react.and){if(Array.isArray(react.and)){react.and=[].concat(_toConsumableArray(react.and),[component]);return react;}else if(typeof react.and==='string'){react.and=[react.and,component];return react;}react.and=pushToAndClause(react.and,component);return react;}return _extends({},react,{and:component});}function checkValueChange(componentId,value,beforeValueChange,performUpdate){var selectedValue=value;if(Array.isArray(value)&&!value.length){selectedValue=null;}var handleError=function handleError(e){console.warn(componentId+' - beforeValueChange rejected the promise with ',e);};if(beforeValueChange){try{var promise=beforeValueChange(selectedValue);if(promise instanceof Promise){promise.then(performUpdate).catch(handleError);}else{performUpdate();}}catch(e){handleError(e);}}else{performUpdate();}}function getAggsOrder(sortBy){if(sortBy==='count'){return{_count:'desc'};}return{_key:sortBy};}var checkPropChange=exports.checkPropChange=function checkPropChange(prevProp,nextProp,callback){if(!isEqual(prevProp,nextProp)){callback();return true;}return false;};var checkSomePropChange=exports.checkSomePropChange=function checkSomePropChange(){var prevProps=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var nextProps=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var propsList=arguments[2];var callback=arguments[3];propsList.some(function(prop){return checkPropChange(prevProps[prop],nextProps[prop],callback);});};var getClassName=exports.getClassName=function getClassName(classMap,component){return classMap&&classMap[component]||'';};var getInnerKey=exports.getInnerKey=function getInnerKey(obj,key){return obj&&obj[key]||{};};var handleA11yAction=exports.handleA11yAction=function handleA11yAction(e,callback){if(e.key==='Enter'||e.key===' '){e.preventDefault();callback();}};var highlightResults=function highlightResults(result){var data=_extends({},result);if(data.highlight){Object.keys(data.highlight).forEach(function(highlightItem){var highlightValue=data.highlight[highlightItem][0];data._source=_extends({},data._source,_defineProperty({},highlightItem,highlightValue));});}return data;};var parseHits=exports.parseHits=function parseHits(hits){var showHighlighted=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var results=null;if(hits){results=[].concat(_toConsumableArray(hits)).map(function(item){var data=_extends({},item);if(showHighlighted)data=highlightResults(item);var result=Object.keys(data).filter(function(key){return key!=='_source';}).reduce(function(obj,key){obj[key]=data[key];return obj;},_extends({highlight:data.highlight||{}},data._source));return result;});}return results;};function formatDate(date,props){if(props.parseDate){return props.parseDate(date,props);}switch(props.queryFormat){case'epoch_millis':return date.getTime();case'epoch_second':return Math.floor(date.getTime()/1000);default:{if(_dateFormats2.default[props.queryFormat]){return date.toString(_dateFormats2.default[props.queryFormat]);}return date.getTime();}}}var getOptionsFromQuery=function getOptionsFromQuery(){var customQuery=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(customQuery){var query=customQuery.query,rest=_objectWithoutProperties(customQuery,['query']);return Object.keys(rest).length?rest:null;}return null;};exports.getOptionsFromQuery=getOptionsFromQuery;var getOptionsForCustomQuery=function getOptionsForCustomQuery(){var customQuery=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(customQuery){var query=customQuery.query,id=customQuery.id,params=customQuery.params,rest=_objectWithoutProperties(customQuery,['query','id','params']);return Object.keys(rest).length?rest:null;}return null;};exports.getOptionsForCustomQuery=getOptionsForCustomQuery;var extractQueryFromCustomQuery=exports.extractQueryFromCustomQuery=function extractQueryFromCustomQuery(customQuery){if(customQuery){if(customQuery.id){return{id:customQuery.id,params:customQuery.params};}return customQuery.query;}return null;};function computeResultStats(hits,searchState,promotedResults){Object.keys(hits).forEach(function(componentId){var _ref=hits[componentId]||{},hidden=_ref.hidden,total=_ref.total,time=_ref.time;searchState[componentId]=_extends({},searchState[componentId],{resultStats:_extends({},searchState[componentId].resultStats,{numberOfResults:total,time:time,promoted:promotedResults[componentId]&&promotedResults[componentId].length,hidden:hidden||0})});});}var getSearchState=exports.getSearchState=function getSearchState(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var forHeaders=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var selectedValues=state.selectedValues,queryLog=state.queryLog,dependencyTree=state.dependencyTree,props=state.props,hits=state.hits,aggregations=state.aggregations,isLoading=state.isLoading,error=state.error,promotedResults=state.promotedResults,settings=state.settings,customData=state.customData,rawData=state.rawData;var searchState={};var populateState=function populateState(){var obj=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var key=arguments[1];return Object.keys(obj).forEach(function(componentId){searchState[componentId]=_extends({},searchState[componentId],key?_defineProperty({},key,obj[componentId]):obj[componentId]);});};populateState(props);Object.keys(selectedValues).forEach(function(componentId){var componentState=searchState[componentId];var selectedValue=selectedValues[componentId];if(selectedValue){searchState[componentId]=_extends({},componentState,_extends({title:selectedValue.label,componentType:selectedValue.componentType,value:selectedValue.value},selectedValue.category&&{category:selectedValue.category},{URLParams:selectedValue.URLParams}));}});if(!forHeaders){populateState(queryLog);populateState(hits,'hits');populateState(aggregations,'aggregations');populateState(isLoading,'isLoading');populateState(error,'error');populateState(promotedResults,'promotedData');populateState(settings,'settings');populateState(customData,'customData');populateState(rawData,'rawData');computeResultStats(hits,searchState,promotedResults);}populateState(dependencyTree,'react');return searchState;};var updateInternalQuery=exports.updateInternalQuery=function updateInternalQuery(componentId,queryOptions,value,props,defaultQueryToExecute,queryParams){var defaultQuery=props.defaultQuery;var defaultQueryOptions=void 0;var query=void 0;if(defaultQuery){var queryTobeSet=defaultQuery(value,props);var _ref3=queryTobeSet||{};query=_ref3.query;defaultQueryOptions=getOptionsFromQuery(queryTobeSet);updateDefaultQuery(componentId,props,value);}props.setQueryOptions(componentId,_extends({},defaultQueryOptions,queryOptions||defaultQueryToExecute));if(query){props.updateQuery(_extends({componentId:componentId,query:query,value:value},queryParams));}};var extractQueryFromDefaultQuery=function extractQueryFromDefaultQuery(props,value){var queryToBeReturned={};var defaultQuery=props.defaultQuery;if(defaultQuery){var evaluateQuery=defaultQuery(value,props);if(evaluateQuery){var query=evaluateQuery.query,options=_objectWithoutProperties(evaluateQuery,['query']);if(options){queryToBeReturned=options;}}}return queryToBeReturned;};exports.extractQueryFromDefaultQuery=extractQueryFromDefaultQuery;var getAggsQuery=exports.getAggsQuery=function getAggsQuery(value,query,props){var clonedQuery=query;var dataField=props.dataField,size=props.size,sortBy=props.sortBy,showMissing=props.showMissing,missingLabel=props.missingLabel;clonedQuery.size=0;clonedQuery.aggs=_defineProperty({},dataField,{terms:_extends({field:dataField,size:size,order:getAggsOrder(sortBy||'count')},showMissing?{missing:missingLabel}:{})});if(props.nestedField){clonedQuery.aggs={reactivesearch_nested:{nested:{path:props.nestedField},aggs:clonedQuery.aggs}};}return _extends({},clonedQuery,extractQueryFromDefaultQuery(props,value));};var getCompositeAggsQuery=exports.getCompositeAggsQuery=function getCompositeAggsQuery(){var _ref4=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref4$query=_ref4.query,query=_ref4$query===undefined?{}:_ref4$query,props=_ref4.props,_ref4$after=_ref4.after,after=_ref4$after===undefined?null:_ref4$after,_ref4$showTopHits=_ref4.showTopHits,showTopHits=_ref4$showTopHits===undefined?false:_ref4$showTopHits,value=_ref4.value;var clonedQuery=query;var dataField=props.dataField,size=props.size,sortBy=props.sortBy,showMissing=props.showMissing,aggregationField=props.aggregationField;var finalField=aggregationField||dataField;var order=sortBy==='count'?{}:{order:sortBy};clonedQuery.aggs=_defineProperty({},finalField,_extends({composite:_extends({sources:[_defineProperty({},finalField,{terms:_extends({field:finalField},order,showMissing?{missing_bucket:true}:{})})],size:size},after)},showTopHits?{aggs:_defineProperty({},finalField,{top_hits:{size:1}})}:{}));clonedQuery.size=0;if(props.nestedField){clonedQuery.aggs={reactivesearch_nested:{nested:{path:props.nestedField},aggs:clonedQuery.aggs}};}return _extends({},clonedQuery,extractQueryFromDefaultQuery(props,value));};var withClickIds=exports.withClickIds=function withClickIds(){var results=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return results.map(function(result,index){return _extends({},result,{_click_id:index});});};function getResultStats(props){var total=props.total,size=props.size,time=props.time,hidden=props.hidden,promotedResults=props.promotedResults;return _extends({numberOfResults:total},size>0?{numberOfPages:Math.ceil(total/size)}:null,{time:time||0,hidden:hidden,promoted:promotedResults&&promotedResults.length});}function extractFieldsFromSource(esSource){function getFields(){var source=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var prefix=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';return Object.keys(source).reduce(function(){var acc=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var k=arguments[1];var key=prefix?prefix+'.'+k:k;if(!Number.isNaN(parseInt(k,10))){key=prefix||k;}if(source[k]&&typeof source[k]==='object'){return _extends({},acc,getFields(source[k],key));}return _extends({},acc,_defineProperty({},key,true));},[]);}var fields=getFields(esSource);return Object.keys(fields);}function normalizeDataField(dataField){var fieldWeights=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];if(typeof dataField==='string'){return[{field:dataField,weight:fieldWeights.length?fieldWeights[0]:undefined}];}if(Array.isArray(dataField)){return dataField.map(function(field,index){var normalizedField={};if(typeof field==='string'){normalizedField.field=field;if(fieldWeights.length>index){normalizedField.weight=fieldWeights[index];}}else if(typeof field==='object'&&field&&field.field){normalizedField.field=field.field;normalizedField.weight=field.weight;}return normalizedField;});}if(typeof dataField==='object'&&dataField){return[{field:dataField.field,weight:dataField.weight}];}return[];}function handleOnSuggestions(results,currentValue,props){var parseSuggestion=props.parseSuggestion,promotedResults=props.promotedResults,enablePredictiveSuggestions=props.enablePredictiveSuggestions;var fields=[];if(props.dataField){fields=normalizeDataField(props.dataField).map(function(f){return f.field;});}else if(results&&Array.isArray(results)&&results.length>0&&results[0]&&results[0]._source){fields=extractFieldsFromSource(results[0]._source);}var newResults=parseHits(results,false);var parsedPromotedResults=parseHits(promotedResults,false);if(parsedPromotedResults&&parsedPromotedResults.length){var ids=parsedPromotedResults.map(function(item){return item._id;}).filter(Boolean);if(ids){newResults=newResults.filter(function(item){return!ids.includes(item._id);});}newResults=[].concat(_toConsumableArray(parsedPromotedResults),_toConsumableArray(newResults));}var parsedSuggestions=(0,_suggestions2.default)({fields:fields,suggestions:newResults,currentValue:currentValue.toLowerCase(),showDistinctSuggestions:props.showDistinctSuggestions,enablePredictiveSuggestions:enablePredictiveSuggestions,enableSynonyms:props.enableSynonyms});if(parseSuggestion){return parsedSuggestions.map(function(suggestion){return parseSuggestion(suggestion);});}return parsedSuggestions;}var getTopSuggestions=exports.getTopSuggestions=function getTopSuggestions(querySuggestions){var currentValue=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var showDistinctSuggestions=arguments[2];var parsedSuggestions=parseHits(querySuggestions,false);var finalSuggestions=(0,_suggestions2.default)({fields:['key','key.autosuggest','key.search'],suggestions:parsedSuggestions||[],currentValue:currentValue.toLowerCase(),showDistinctSuggestions:showDistinctSuggestions});return withClickIds(finalSuggestions);};function isValidDateRangeQueryFormat(queryFormat){return Object.keys(_dateFormats2.default).includes(queryFormat);}var suggestionTypes=exports.suggestionTypes={Popular:'popular',Index:'index',Recent:'recent',Promoted:'promoted'};var queryFormatMillisecondsMap=exports.queryFormatMillisecondsMap={minute:60000,hour:3600000,day:86400000,week:604800000,month:2629746000,quarter:7889238000,year:31556952000};var getCalendarIntervalErrorMessage=exports.getCalendarIntervalErrorMessage=function getCalendarIntervalErrorMessage(totalRange){var calendarInterval=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'minute';var queryFormatMillisecondsMapKeys=Object.keys(queryFormatMillisecondsMap);var indexOfCurrentCalendarInterval=queryFormatMillisecondsMapKeys.indexOf(calendarInterval);if(indexOfCurrentCalendarInterval===-1){console.error('Invalid calendarInterval Passed');}if(calendarInterval==='year'){return'Try using a shorter range of values.';}for(var index=indexOfCurrentCalendarInterval+1;index<queryFormatMillisecondsMapKeys.length;index+=1){if(totalRange/Object.values(queryFormatMillisecondsMap)[index]<=100){var calendarIntervalKey=queryFormatMillisecondsMapKeys[index];return{errorMessage:'Please pass calendarInterval prop with value greater than or equal to a `'+calendarIntervalKey+'` for a meaningful resolution of histogram.',calculatedCalendarInterval:calendarIntervalKey};}}return{errorMessage:'Try using a shorter range of values.',calculatedCalendarInterval:'year'};};var isFunction=exports.isFunction=function isFunction(element){return typeof element==='function';};var getComponent=exports.getComponent=function getComponent(){var data=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var props=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var children=props.children,render=props.render;if(isFunction(children)){return children(data);}if(isFunction(render)){return render(data);}return null;};var hasCustomRenderer=exports.hasCustomRenderer=function hasCustomRenderer(){var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var render=props.render,children=props.children;return isFunction(children)||isFunction(render);};"]},"metadata":{},"sourceType":"script"}